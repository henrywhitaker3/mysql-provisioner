stages:
  - validate
  - package
  - release

include:
  - project: 'gitlab-com/gl-infra/common-ci-tasks'
    ref: v1.73.1
    file: goreleaser.yml

.rules:
  rules:
    - if: $CI_COMMIT_TAG =~ "/^v[0-9]+[.][0-9]+[.][0-9]+$/"

goreleaser:
  stage: release
  extends:
    - .rules
  variables:
    GL_ASDF_GORELEASER_VERSION: "1.18.2"
